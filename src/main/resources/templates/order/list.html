<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org" th:replace="~{/user/layout :: dynamic(~{::main})}"
>

  <body>
    <main class="mt-3 p-0">
		<style>
			.nav-item.nav-link:active {
				background-color: #ff1700;
			}
			nav > .nav.nav-tabs {
				border: none;
				color: #fff;
				background: #272e38;
				border-radius: 0;
				padding: 20px 10px;
				width: 100%;
			}

			nav > div a.nav-item.nav-link,
			nav > div a.nav-item.nav-link.active {
				border: none;
				padding: 18px 100px;
				color: #fff;
				background: #272e38;
				border-radius: 0;
			}

			nav > div a.nav-item.nav-link:hover,
			nav > div a.nav-item.nav-link:focus,
			nav > div a.nav-item.nav-link:active {
				border: none;
				background: #ff1700;
				color: #fff;
				border-radius: 0;
				transition: background 0.20s linear;
			}

			.tab-content {
				background: #fdfdfd;
				line-height: 25px;
				border: 1px solid #ddd;
				border-top: 5px solid #ff1700;
				border-bottom: 5px solid #ff1700;
				padding: 30px 25px;
			}

			nav > div a.nav-item.nav-link:hover,
			nav > div a.nav-item.nav-link:focus
			{
				border: none;
				background: #ff1700;
				color:#fff;
				border-radius:0;
				transition:background 0.20s linear;
			}
		</style>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 ">
					<nav>
						<div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
							<a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Chờ xác nhận    </a>
							<a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Đang giao    </a>
							<a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">Đã hủy       </a>
							<a class="nav-item nav-link" id="nav-about-tab" data-toggle="tab" href="#nav-about" role="tab" aria-controls="nav-about" aria-selected="false">Đã giao            </a>
						</div>
					</nav>
					<div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">
						<div class="tab-pane fade" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
							<div class="card text-center border-info">
								<div class="card-header h3 text-bg-info">Đơn hàng của bạn đã mua</div>
								<div class="card-body text-start p-0">
									<table class="table border-info text-center m-0">
										<thead class="table-info border-info">
										<tr>
											<th scope="col" class="text-center">STT</th>
											<th scope="col" class="text-center">Ngày đặt</th>
											<th scope="col" class="text-center">Địa chỉ đặt hàng</th>
											<th scope="col" class="text-center">Trạng thái đơn hàng</th>
											<th scope="col" class="text-center">Tổng tiền</th>
											<th scope="col" class="text-center">Tiện ích</th>
										</tr>
										</thead>

										<tbody>
										<tr th:each="order,state:${cxn}">
											<th>[[${state.index+1}]]</th>
											<td>[[${order.createDate}]]</td>
											<td>[[${order.address}]]</td>
											<td>[[${order.status_order}]]</td>
											<td>[[${order.origninal_price}]]</td>
											<td>
												<a class="btn btn-outline-danger" th:attr="onclick=|showConfirmBox('${order.id}')|">
													<i class="fa-solid fa-rotate-left"></i>
													<b>Hủy đơn</b>
												</a>
												<a th:href="@{|/order/detail/${order.id}|}" class="btn btn-outline-danger">
													<i class="fa-solid fa-magnifying-glass"></i>
												</a>
											</td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
							<div class="card text-center border-info">
								<div class="card-header h3 text-bg-info">Đơn hàng của bạn đã mua</div>
								<div class="card-body text-start p-0">
									<table class="table border-info text-center m-0">
										<thead class="table-info border-info">
										<tr>
											<th scope="col" class="text-center">STT</th>
											<th scope="col" class="text-center">Ngày đặt</th>
											<th scope="col" class="text-center">Địa chỉ đặt hàng</th>
											<th scope="col" class="text-center">Trạng thái đơn hàng</th>
											<th scope="col" class="text-center">Tổng tiền</th>
											<th scope="col" class="text-center">Tiện ích</th>
										</tr>
										</thead>
										<tbody>
										<tr th:each="order,state:${dg}">
											<th>[[${state.index+1}]]</th>
											<td>[[${order.createDate}]]</td>
											<td>[[${order.address}]]</td>
											<td>[[${order.status_order}]]</td>
											<td>[[${order.origninal_price}]]</td>
											<td>
												<a th:href="@{|/order/detail/${order.id}|}" class="btn btn-outline-danger">
													<i class="fa-solid fa-magnifying-glass"></i>
												</a></td>
										</tr>

										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
							<div class="card text-center border-info">
								<div class="card-header h3 text-bg-info">Đơn hàng của bạn đã mua</div>
								<div class="card-body text-start p-0">
									<table class="table border-info text-center m-0">
										<thead class="table-info border-info">
										<tr>
											<th scope="col" class="text-center">STT</th>
											<th scope="col" class="text-center">Ngày đặt</th>
											<th scope="col" class="text-center">Địa chỉ đặt hàng</th>
											<th scope="col" class="text-center">Trạng thái đơn hàng</th>
											<th scope="col" class="text-center">Tổng tiền</th>
											<th scope="col" class="text-center">Tiện ích</th>
										</tr>
										</thead>
										<tbody>
										<tr th:each="order,state:${dh}">
											<th>[[${state.index+1}]]</th>
											<td>[[${order.createDate}]]</td>
											<td>[[${order.address}]]</td>
											<td>[[${order.status_order}]]</td>
											<td>[[${order.origninal_price}]]</td>
											<td>
												<a th:href="@{|/order/detail/${order.id}|}" class="btn btn-outline-danger">
													<i class="fa-solid fa-magnifying-glass"></i>
												</a></td>
										</tr>

										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="nav-about" role="tabpanel" aria-labelledby="nav-about-tab">
							<div class="card text-center border-info">
								<div class="card-header h3 text-bg-info">Đơn hàng của bạn đã mua</div>
								<div class="card-body text-start p-0">
									<table class="table border-info text-center m-0">
										<thead class="table-info border-info">
										<tr>
											<th scope="col" class="text-center">STT</th>
											<th scope="col" class="text-center">Ngày đặt</th>
											<th scope="col" class="text-center">Địa chỉ đặt hàng</th>
											<th scope="col" class="text-center">Trạng thái đơn hàng</th>
											<th scope="col" class="text-center">Tổng tiền</th>
											<th scope="col" class="text-center">Tiện ích</th>
										</tr>
										</thead>
										<tbody>
										<tr th:each="order,state:${dgh}">
											<th>[[${state.index+1}]]</th>
											<td>[[${order.createDate}]]</td>
											<td>[[${order.address}]]</td>
											<td>[[${order.status_order}]]</td>
											<td>[[${order.origninal_price}]]</td>
											<td>
												<a th:href="@{|/order/detail/${order.id}|}" class="btn btn-outline-danger">
													<i class="fa-solid fa-magnifying-glass"></i>
												</a></td>
										</tr>

										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			function showConfirmBox(orderId) {
				event.preventDefault(); // Ngăn chặn hành động mặc định của nút
				Swal.fire({
					title: 'Xác nhận hủy đơn',
					text: 'Bạn có chắc chắn muốn hủy đơn hàng?',
					icon: 'warning',
					showCancelButton: true,
					confirmButtonText: 'Hủy đơn',
					cancelButtonText: 'Không',
					reverseButtons: true
				}).then((result) => {
					if (result.isConfirmed) {
						// Nếu người dùng xác nhận hủy đơn, chuyển hướng đến đường dẫn hủy đơn
						window.location.href = "/order/cancel/" + orderId;
					}
				});
			}
			$( document ).ready(function() {
				var a = document.getElementById("nav-home-tab");
				a.click();

			});
		</script>
	</main>
  </body>
</html>
